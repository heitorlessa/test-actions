name: Dummy action

on:
  push:
    branches: [master]
    tags: 
      - v*
#   release:
#       types: [published]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.6, 3.7, 3.8]

    steps:
    - uses: actions/checkout@v2
    - name: Capture branch and tag
      id: branch_name
      run: |
        echo ::set-env name=SOURCE_NAME::${GITHUB_REF#refs/*/}
        echo ::set-env name=SOURCE_BRANCH::${GITHUB_REF#refs/heads/}
        echo ::set-env name=SOURCE_TAG::${GITHUB_REF#refs/tags/}
    - name: Print source, tag, and branch
      run: |
        echo "Source: ${SOURCE_NAME}"
        echo "Branch: ${SOURCE_BRANCH}"
        echo "Tag: ${SOURCE_TAG}"

    # - name: Set up Python ${{ matrix.python-version }}
    #   uses: actions/setup-python@v2
    #   with:
    #     python-version: ${{ matrix.python-version }}
# Poetry cache test
    - name: Hello master
      run: |
        echo "Hello"
      if: env.SOURCE_BRANCH == 'master'
    - name: Bye
      run: |
        echo "Bye!"
